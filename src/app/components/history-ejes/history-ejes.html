<div class="historial-container">
    <h2>ðŸ“˜ Historial de Carreras Calculadas</h2>

    <ng-container *ngIf="carrerasConEjes.length > 0; else noCarreras">
        <div *ngFor="let item of carrerasConEjes; let i = index" class="carrera-block">
            <h3>ID Carrera: {{ item.carrera.id }}</h3>

            <div class="carrera-info">
                <p><strong>Nombre de la Carrera:</strong> <span>{{ item.carrera.careerId }}</span></p>
                <p><strong>Tipo de Carrera:</strong> <span>{{ item.carrera.careerId }}</span></p>
                <p><strong>Fecha de cÃ¡lculo:</strong> <span>{{ item.carrera.fechaActual }}</span></p>
                <p><strong>Fecha de finalizaciÃ³n:</strong> <span>{{ item.carrera.fechaFin }}</span></p>
            </div>

            <h4 (click)="toggleEjesVisibles(i)" class="expand-button">
                ðŸ§© Ejes de la Carrera
                <span class="toggle-icon" *ngIf="!item.ejesVisibles">[Ver Ejes]</span>
                <span class="toggle-icon" *ngIf="item.ejesVisibles">[Contraer Ejes]</span>
            </h4>

            <ng-container *ngIf="item.ejesVisibles; else sinEjes">
                <div class="ejes-container">
                    <div *ngFor="let eje of getEjesOrdenados(item.ejes)" class="nivel-block">
                        <div class="nivel-title">
                            Nivel {{ eje.nivel }}
                        </div>

                        <div class="ejes-grid">
                            <div class="eje-column" *ngIf="eje.eje1 && eje.eje1 !== '-'">
                                <h5 class="eje-header">Eje 1:</h5>
                                <div class="eje-content">
                                    <div class="eje-item" *ngFor="let materia of eje.eje1.split(' - ')">
                                        {{ materia.trim() }}
                                    </div>
                                </div>
                            </div>

                            <div class="eje-column" *ngIf="eje.eje2 && eje.eje2 !== '-'">
                                <h5 class="eje-header">Eje 2:</h5>
                                <div class="eje-content">
                                    <div class="eje-item" *ngFor="let materia of eje.eje2.split(' - ')">
                                        {{ materia.trim() }}
                                    </div>
                                </div>
                            </div>

                            <div class="eje-column" *ngIf="eje.eje3 && eje.eje3 !== '-'">
                                <h5 class="eje-header">Eje 3:</h5>
                                <div class="eje-content">
                                    <div class="eje-item" *ngFor="let materia of eje.eje3.split(' - ')">
                                        {{ materia.trim() }}
                                    </div>
                                </div>
                            </div>

                            <div class="eje-column" *ngIf="eje.eje4 && eje.eje4 !== '-'">
                                <h5 class="eje-header">Eje 4:</h5>
                                <div class="eje-content">
                                    <div class="eje-item" *ngFor="let materia of eje.eje4.split(' - ')">
                                        {{ materia.trim() }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>

            <ng-template #sinEjes>
                <div class="sin-ejes">
                    <p>â€” Esta carrera no tiene ejes asignados â€”</p>
                </div>
            </ng-template>

            <hr />
        </div>
    </ng-container>

    <ng-template #noCarreras>
        <div class="no-carreras">
            <p>No se ha encontrado informaciÃ³n de carreras calculadas.</p>
        </div>
    </ng-template>
</div>